Version 4
SHEET 1 1860 1588
WIRE 80 -1008 -64 -1008
WIRE 272 -1008 80 -1008
WIRE 528 -1008 272 -1008
WIRE 272 -976 272 -1008
WIRE 528 -960 528 -1008
WIRE -64 -864 -64 -1008
WIRE 272 -864 272 -896
WIRE 528 -800 528 -880
WIRE 640 -800 528 -800
WIRE 656 -800 640 -800
WIRE 528 -752 528 -800
WIRE 272 -736 272 -784
WIRE 384 -736 272 -736
WIRE 400 -736 384 -736
WIRE 272 -720 272 -736
WIRE -64 -624 -64 -784
WIRE 96 -624 -64 -624
WIRE 272 -624 272 -640
WIRE 272 -624 96 -624
WIRE 528 -624 528 -672
WIRE 528 -624 272 -624
WIRE 1008 -256 976 -256
WIRE 1136 -256 1088 -256
WIRE 1200 -256 1136 -256
WIRE 64 -240 48 -240
WIRE 176 -240 144 -240
WIRE 1136 -224 1136 -256
WIRE -64 -176 -96 -176
WIRE 48 -176 48 -240
WIRE 48 -176 16 -176
WIRE 48 -160 48 -176
WIRE 80 -160 48 -160
WIRE 176 -144 176 -240
WIRE 176 -144 144 -144
WIRE 208 -144 176 -144
WIRE 80 -128 48 -128
WIRE 1136 -128 1136 -160
WIRE -64 -112 -96 -112
WIRE 48 -112 48 -128
WIRE 48 -112 16 -112
WIRE 48 -96 48 -112
WIRE 48 0 48 -16
WIRE 816 160 736 160
WIRE 896 160 880 160
WIRE 1008 160 976 160
WIRE 1040 160 1008 160
WIRE 1120 160 1040 160
WIRE 1456 160 1376 160
WIRE 1616 160 1456 160
WIRE 1728 160 1616 160
WIRE 32 224 16 224
WIRE 144 224 112 224
WIRE 1728 272 1728 160
WIRE -96 288 -128 288
WIRE 16 288 16 224
WIRE 16 288 -16 288
WIRE 16 304 16 288
WIRE 48 304 16 304
WIRE 144 320 144 224
WIRE 144 320 112 320
WIRE 176 320 144 320
WIRE 1040 320 1040 160
WIRE 1456 320 1456 160
WIRE 48 336 16 336
WIRE -96 352 -128 352
WIRE 16 352 16 336
WIRE 16 352 -16 352
WIRE 16 368 16 352
WIRE 16 464 16 448
WIRE 768 480 736 480
WIRE 1040 480 1040 384
WIRE 1040 480 768 480
WIRE 1248 480 1248 256
WIRE 1248 480 1040 480
WIRE 1456 480 1456 384
WIRE 1456 480 1248 480
WIRE 1728 480 1728 352
WIRE 1728 480 1456 480
WIRE 768 496 768 480
FLAG 96 -624 0
FLAG 80 -1008 Vac
FLAG 384 -736 Vis
FLAG 640 -800 Vvs
FLAG 1136 -128 0
FLAG 976 -256 Vopamp
FLAG 1200 -256 Vfilter
FLAG 112 -112 0
FLAG 112 -176 5V
FLAG -96 -112 Vis
FLAG -96 -176 0
FLAG 208 -144 Vio
FLAG 48 0 2V1
FLAG 80 352 0
FLAG 80 288 5V
FLAG -128 352 Vvs
FLAG -128 288 0
FLAG 176 320 Vvo
FLAG 16 464 2V1
FLAG 768 496 0
FLAG 736 160 Vac
FLAG 1616 160 5VDis
FLAG 1008 160 Vin
FLAG -80 -1216 0
FLAG -80 -1296 5V
FLAG 64 -1216 0
FLAG 64 -1296 2V1
FLAG 192 -1296 Vsens
FLAG 192 -1216 0
FLAG 432 -1216 0
FLAG 432 -1296 Vopamp
SYMBOL voltage -64 -880 R0
WINDOW 0 24 96 Left 2
WINDOW 3 22 124 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply1
SYMATTR Value SINE(0 17.819 500)
SYMBOL res 256 -880 R0
SYMATTR InstName Rload1
SYMATTR Value 16.474
SYMBOL ind 256 -992 R0
SYMATTR InstName Lload1
SYMATTR Value 4mH
SYMBOL res 256 -736 R0
SYMATTR InstName Rs1
SYMATTR Value 0.56
SYMBOL res 512 -976 R0
SYMATTR InstName Ra1
SYMATTR Value 220k
SYMBOL res 512 -768 R0
SYMATTR InstName Rb1
SYMATTR Value 10k
SYMBOL res 1104 -272 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf1
SYMATTR Value 1
SYMBOL cap 1152 -160 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf1
SYMATTR Value 15.92µF
SYMBOL Opamps/opamp2 112 -208 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res 32 -128 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 32 -192 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 160 -256 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R3
SYMATTR Value 2.2k
SYMBOL res 64 0 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R4
SYMATTR Value 2.2k
SYMBOL Opamps/opamp2 80 256 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res 0 336 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R5
SYMATTR Value 9.999046k
SYMBOL res 0 272 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 128 208 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 32 464 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -44 34 Left 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL PowerProducts/LT1085-5 1248 160 R0
SYMATTR InstName Reg1
SYMBOL res 1712 256 R0
SYMATTR InstName RL1
SYMATTR Value 100
SYMBOL res 992 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value 33
SYMBOL diode 816 176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 1024 320 R0
SYMATTR InstName Cin1
SYMATTR Value 47µ
SYMATTR SpiceLine Rser=0.001
SYMBOL cap 1440 320 R0
SYMATTR InstName Cout1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.001
SYMBOL voltage -80 -1312 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage 64 -1312 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 2.1V
SYMBOL voltage 192 -1312 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 0.1 500)
SYMBOL voltage 432 -1312 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(2.1 1 500)
TEXT 224 -968 Right 2 ;Load \n(2.5VA-7.5VA)
TEXT 224 -680 Right 2 ;Current Sens \n(Pmax=?)
TEXT -88 -1400 Left 2 ;Power/Signal Sources
TEXT 1216 -1296 Left 2 ;.ac dec 30 1 1Meg
TEXT 1216 -1360 Left 2 !.lib LM324.lib
TEXT 1208 -1424 Left 2 ;Simulation Commands\n- Change these as needed
TEXT 1216 -1328 Left 2 !.tran 0 0.5 0 0.01m
TEXT 1216 -1264 Left 2 !.ic V(Vin)=8
TEXT 1648 -1368 Left 2 !;ac dec 30 1 1Meg
TEXT -64 -1080 Left 2 ;Voltage and current sensing circuit design
TEXT -56 -496 Left 2 ;Supply a max voltage around 14V rms
TEXT -96 -336 Left 2 ;Level-shifting and amplification for current sensor
TEXT -168 128 Left 2 ;Level-shifting and amplification of Voltage sensor
RECTANGLE Normal 232 -988 360 -772 2
RECTANGLE Normal 232 -744 360 -632 2
RECTANGLE Normal 476 -1036 612 -600 2
RECTANGLE Normal 1192 -1440 1628 -1236 2
